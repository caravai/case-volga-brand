<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['system-ui', '-apple-system', 'BlinkMacSystemFont', '"Segoe UI"', 'sans-serif'],
          },
        },
      },
    };
  </script>

  <!-- QRCodeJS CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <!-- –ù–µ–±–æ–ª—å—à–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ -->
  <style>
    /* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ */
    .card-fade {
      opacity: 0;
      transform: translateY(4px);
      transition: opacity 200ms ease-out, transform 200ms ease-out;
    }

    .card-fade--visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* –ü–ª–∞–≤–Ω–∞—è —Å–º–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ */
    #talks-container {
      transition: opacity 200ms ease-out;
    }

    #talks-container.is-filtering {
      opacity: 0.3;
    }
  </style>
</head>
<body class="min-h-screen bg-slate-50 font-sans text-slate-900">
  <div class="mx-auto flex min-h-screen max-w-5xl flex-col px-4 py-6 sm:px-6 lg:px-8">

    <!-- Header -->
    <header class="mb-6 sm:mb-8">
      <!-- –í–µ—Ä—Ö–Ω—è—è –ø–æ–ª–æ—Å–∞: –ª–æ–≥–æ—Ç–∏–ø + –ø–æ–¥–µ–ª–∏—Ç—å—Å—è + QR -->
      <div class="mb-4 flex flex-wrap items-center justify-between gap-4">
        <!-- –õ–æ–≥–æ—Ç–∏–ø –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è -->
        <div class="flex items-center gap-3">
          <div class="flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-900 text-sm font-bold tracking-tight text-slate-50 sm:h-11 sm:w-11">
            CF
          </div>
          <div class="leading-tight">
            <div class="text-[11px] font-semibold uppercase tracking-[0.16em] text-slate-500">
              Conf ¬∑ 2025
            </div>
            <div class="text-sm font-semibold text-slate-900 sm:text-base">
              Conference Schedule
            </div>
          </div>
        </div>

        <div class="flex items-center gap-3">
          <!-- –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∏–∑–±—Ä–∞–Ω–Ω—ã–º" -->
          <button
            id="share-button"
            type="button"
            class="inline-flex items-center gap-1 rounded-xl border border-slate-200 bg-white/80 px-3 py-2 text-xs font-medium text-slate-700 shadow-sm transition hover:-translate-y-[1px] hover:border-slate-300 hover:bg-slate-50 hover:shadow-md sm:text-sm"
          >
            <span>üîó</span>
            <span>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∏–∑–±—Ä–∞–Ω–Ω—ã–º</span>
          </button>

          <!-- QR-–∫–æ–¥ -->
          <div
            id="qrcode"
            class="flex h-16 w-16 items-center justify-center rounded-xl bg-white shadow-sm ring-1 ring-slate-200"
          ></div>
        </div>
      </div>

      <!-- –û—Å–Ω–æ–≤–Ω–∞—è —à–∞–ø–∫–∞ -->
      <div class="flex flex-wrap items-baseline justify-between gap-3">
        <div>
          <h1 class="text-2xl font-semibold tracking-tight sm:text-3xl">
            –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏
          </h1>
          <p class="mt-1 text-sm text-slate-600 sm:text-base">
            –°—É–±–±–æ—Ç–∞, 14 —Ñ–µ–≤—Ä–∞–ª—è ¬∑ –ü–æ—Ç–æ–∫–∏ Frontend ¬∑ Backend ¬∑ Data
          </p>
        </div>
        <span class="inline-flex items-center rounded-full bg-slate-900 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-50">
          Z Hall ¬∑ 2025
        </span>
      </div>

      <p class="mt-4 max-w-2xl text-sm leading-relaxed text-slate-700 sm:text-base">
        –í—Å–µ –¥–æ–∫–ª–∞–¥—ã –∏–¥—É—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–æ —Ç—Ä–µ–∫–∞–º. –í—Ä–µ–º—è —É–∫–∞–∑–∞–Ω–æ –ø–æ –º–µ—Å—Ç–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –ø–ª–æ—â–∞–¥–∫–∏.
        –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–æ–∂–µ—Ç –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—è—Ç—å—Å—è.
      </p>
    </header>

    <!-- –§–∏–ª—å—Ç—Ä—ã -->
    <section class="mb-5 sm:mb-6" aria-label="–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–æ–∫–ª–∞–¥–æ–≤">
      <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
        <!-- –ü–æ–∏—Å–∫ -->
        <div class="relative flex-1">
          <label for="search-input" class="sr-only">–ü–æ–∏—Å–∫ –ø–æ –¥–æ–∫–ª–∞–¥–∞–º</label>
          <input
            id="search-input"
            type="text"
            placeholder="üîç –ü–æ–∏—Å–∫ –¥–æ–∫–ª–∞–¥–∞..."
            class="w-full rounded-xl border border-slate-200 bg-white/80 px-3 py-2 text-sm shadow-sm outline-none ring-0 transition placeholder:text-slate-400 focus:border-slate-400 focus:ring-2 focus:ring-slate-300 sm:text-base"
          />
        </div>

        <!-- –ü—Ä–∞–≤—ã–π –±–ª–æ–∫: —Ç—Ä–µ–∫ + –∏–∑–±—Ä–∞–Ω–Ω–æ–µ -->
        <div class="flex w-full gap-2 sm:w-auto sm:min-w-[20rem] sm:justify-end">
          <!-- –§–∏–ª—å—Ç—Ä –ø–æ —Ç—Ä–µ–∫—É -->
          <div class="w-1/2 sm:w-40">
            <label for="track-select" class="sr-only">–§–∏–ª—å—Ç—Ä –ø–æ —Ç—Ä–µ–∫—É</label>
            <div class="relative">
              <select
                id="track-select"
                class="block w-full appearance-none rounded-xl border border-slate-200 bg-white/80 px-3 py-2 pr-8 text-sm shadow-sm outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-300 sm:text-base"
              >
                <option value="all">–í—Å–µ —Ç—Ä–µ–∫–∏</option>
                <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–∑ JS -->
              </select>
              <div class="pointer-events-none absolute inset-y-0 right-3 flex items-center text-slate-400">
                ‚ñæ
              </div>
            </div>
          </div>

          <!-- –ö–Ω–æ–ø–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ -->
          <div class="w-1/2 sm:w-48">
            <button
              id="favorites-toggle"
              type="button"
              class="inline-flex w-full items-center justify-center gap-1 rounded-xl border border-slate-200 bg-white/80 px-3 py-2 text-sm font-medium text-slate-700 shadow-sm transition hover:-translate-y-[1px] hover:border-slate-300 hover:bg-slate-50 hover:shadow-md"
            >
              <span>‚≠ê</span>
              <span>–ü–æ–∫–∞–∑–∞—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Content -->
    <main class="flex-1">
      <section aria-label="–°–ø–∏—Å–æ–∫ –¥–æ–∫–ª–∞–¥–æ–≤">
        <div
          id="talks-container"
          class="grid gap-4 sm:gap-5 md:grid-cols-2"
        >
          <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –¥–æ–∫–ª–∞–¥–æ–≤ –±—É–¥—É—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω—ã —Å—é–¥–∞ –∏–∑ JS -->
        </div>

        <!-- –°–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ -->
        <p
          id="empty-state"
          class="mt-6 hidden text-sm text-slate-500 sm:text-base"
        >
          –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π —Ç—Ä–µ–∫.
        </p>
      </section>
    </main>

    <!-- Footer -->
    <footer class="mt-8 border-t border-slate-200 pt-4 text-xs text-slate-500 sm:text-sm">
      –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã ‚Äî –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏.
    </footer>
  </div>

  <script>
    const FAVORITES_KEY = "conference_favorites";

    // –î–∞–Ω–Ω—ã–µ –æ –¥–æ–∫–ª–∞–¥–∞—Ö
    const talks = [
      {
        id: 1,
        time: "09:30‚Äì10:00",
        title: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ—Ñ–µ",
        speaker: "–û—Ä–≥–∫–æ–º–∏—Ç–µ—Ç",
        track: "–û–±—â–µ–µ"
      },
      {
        id: 2,
        time: "10:00‚Äì10:40",
        title: "–ö–∞–∫ –Ω–µ —É—Ç–æ–Ω—É—Ç—å –≤ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏",
        speaker: "–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞",
        track: "Frontend"
      },
      {
        id: 3,
        time: "10:00‚Äì10:40",
        title: "–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –±–µ–∑ –±–æ–ª–∏",
        speaker: "–ò–≤–∞–Ω –°–º–∏—Ä–Ω–æ–≤",
        track: "Backend"
      },
      {
        id: 4,
        time: "10:50‚Äì11:30",
        title: "–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π: –∫–µ–π—Å—ã –∏–∑ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞",
        speaker: "–î–º–∏—Ç—Ä–∏–π –ö–æ–≤–∞–ª—ë–≤",
        track: "Frontend"
      },
      {
        id: 5,
        time: "10:50‚Äì11:30",
        title: "PostgreSQL –ø–æ–¥ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π",
        speaker: "–ú–∞—Ä–∏—è –°–µ—Ä–≥–µ–µ–≤–∞",
        track: "Backend"
      },
      {
        id: 6,
        time: "11:40‚Äì12:20",
        title: "–û—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∫ –ø—Ä–æ–¥—É–∫—Ç—É: –∫–∞–∫ –ø–æ–¥—Ä—É–∂–∏—Ç—å Data –∏ –±–∏–∑–Ω–µ—Å",
        speaker: "–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –û—Ä–ª–æ–≤–∞",
        track: "Data"
      },
      {
        id: 7,
        time: "12:20‚Äì13:20",
        title: "–û–±–µ–¥–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ä—ã–≤",
        speaker: "",
        track: "–û–±—â–µ–µ"
      },
      {
        id: 8,
        time: "13:20‚Äì14:00",
        title: "Design systems –¥–ª—è –∂–∏–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤",
        speaker: "–ù–∏–∫–æ–ª–∞–π –ñ—É–∫–æ–≤",
        track: "Frontend"
      },
      {
        id: 9,
        time: "13:20‚Äì14:00",
        title: "gRPC vs REST: –∫–∞–∫ –≤—ã–±—Ä–∞—Ç—å –ø–æ–¥—Ö–æ–¥",
        speaker: "–û–ª–µ–≥ –ö–Ω—è–∑–µ–≤",
        track: "Backend"
      },
      {
        id: 10,
        time: "14:10‚Äì14:50",
        title: "–§–∏—á–µ—Ñ–ª–∞–≥–∏ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π rollout",
        speaker: "–ü–æ–ª–∏–Ω–∞ –õ–µ–±–µ–¥–µ–≤–∞",
        track: "Infra"
      },
      {
        id: 11,
        time: "15:00‚Äì15:40",
        title: "–ü–∞–Ω–µ–ª—å–Ω–∞—è –¥–∏—Å–∫—É—Å—Å–∏—è: –±—É–¥—É—â–µ–µ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏",
        speaker: "–í—Å–µ —Å–ø–∏–∫–µ—Ä—ã",
        track: "–û–±—â–µ–µ"
      }
    ];

    // –¶–≤–µ—Ç–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ç—Ä–µ–∫–æ–≤
    const trackStyles = {
      "Frontend": "bg-sky-100 text-sky-800 ring-sky-200",
      "Backend": "bg-emerald-100 text-emerald-800 ring-emerald-200",
      "Data": "bg-violet-100 text-violet-800 ring-violet-200",
      "Infra": "bg-amber-100 text-amber-800 ring-amber-200",
      "–û–±—â–µ–µ": "bg-slate-100 text-slate-800 ring-slate-200"
    };

    function loadFavorites() {
      try {
        const raw = localStorage.getItem(FAVORITES_KEY);
        const parsed = raw ? JSON.parse(raw) : [];
        return new Set(parsed);
      } catch (e) {
        return new Set();
      }
    }

    function saveFavorites(favorites) {
      try {
        localStorage.setItem(FAVORITES_KEY, JSON.stringify([...favorites]));
      } catch (e) {
        // –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ localStorage
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      const container = document.getElementById("talks-container");
      const searchInput = document.getElementById("search-input");
      const trackSelect = document.getElementById("track-select");
      const emptyState = document.getElementById("empty-state");
      const favoritesToggle = document.getElementById("favorites-toggle");
      const shareButton = document.getElementById("share-button");
      const qrContainer = document.getElementById("qrcode");

      let favorites = loadFavorites();
      let favoritesOnly = false;

      // –ß–∏—Ç–∞–µ–º hash-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –µ—Å–ª–∏ –µ—Å—Ç—å (fav –∏ favOnly)
      const hash = window.location.hash;
      if (hash && hash.length > 1) {
        const params = new URLSearchParams(hash.slice(1));
        const favParam = params.get("fav");
        const favOnlyParam = params.get("favOnly");

        if (favParam) {
          const ids = favParam
            .split(",")
            .map((v) => parseInt(v, 10))
            .filter((v) => !Number.isNaN(v));
          if (ids.length) {
            favorites = new Set(ids);
          }
        }

        if (favOnlyParam === "1") {
          favoritesOnly = true;
        }
      }

      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–∞ —Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Å–∞–π—Ç (–±–µ–∑ hash)
      if (qrContainer && window.QRCode) {
        const baseUrl = window.location.href.split("#")[0];
        new QRCode(qrContainer, {
          text: baseUrl,
          width: 64,
          height: 64
        });
      }

      // –ó–∞–ø–æ–ª–Ω—è–µ–º select —Ç—Ä–µ–∫–∞–º–∏ –∏–∑ –¥–∞–Ω–Ω—ã—Ö
      const uniqueTracks = Array.from(
        new Set(talks.map((t) => t.track).filter(Boolean))
      ).sort();

      uniqueTracks.forEach((track) => {
        const option = document.createElement("option");
        option.value = track;
        option.textContent = track;
        trackSelect.appendChild(option);
      });

      function updateFavoritesToggleAppearance() {
        const isActive = favoritesOnly;
        favoritesToggle.classList.toggle("bg-slate-900", isActive);
        favoritesToggle.classList.toggle("text-slate-50", isActive);
        favoritesToggle.classList.toggle("border-slate-900", isActive);
        favoritesToggle.classList.toggle("hover:bg-slate-50", !isActive);
        favoritesToggle.classList.toggle("hover:bg-slate-900/90", isActive);
      }

      function updateStarAppearance(button, isFavorite) {
        button.classList.toggle("text-yellow-400", isFavorite);
        button.classList.toggle("text-slate-300", !isFavorite);
        button.setAttribute("aria-pressed", isFavorite ? "true" : "false");
        button.title = isFavorite
          ? "–£–±—Ä–∞—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ"
          : "–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ";
      }

      function toggleFavorite(id) {
        if (favorites.has(id)) {
          favorites.delete(id);
        } else {
          favorites.add(id);
        }
        saveFavorites(favorites);
      }

      // –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏
      function createTalkCard(talk) {
        const card = document.createElement("article");
        card.className =
          "card-fade flex flex-col gap-3 rounded-2xl border border-slate-200 bg-white/80 p-4 sm:p-5 shadow-sm backdrop-blur transition hover:-translate-y-1 hover:border-slate-300 hover:shadow-lg";

        // –í–µ—Ä—Ö–Ω—è—è —Å—Ç—Ä–æ–∫–∞: –≤—Ä–µ–º—è + –∑–≤–µ–∑–¥–∞
        const timeRow = document.createElement("div");
        timeRow.className =
          "flex items-center gap-2 text-xs font-medium text-slate-700 sm:text-sm";

        const timePill = document.createElement("span");
        timePill.className =
          "inline-flex items-center rounded-full bg-slate-900 px-2.5 py-1 text-xs font-semibold uppercase tracking-wide text-slate-50";
        timePill.textContent = talk.time;

        const starBtn = document.createElement("button");
        starBtn.type = "button";
        starBtn.className =
          "ml-auto text-lg leading-none text-slate-300 transition transform hover:scale-110 focus:outline-none";
        starBtn.textContent = "‚≠ê";
        const isFavorite = favorites.has(talk.id);
        updateStarAppearance(starBtn, isFavorite);

        starBtn.addEventListener("click", (event) => {
          event.stopPropagation();
          toggleFavorite(talk.id);
          const nowFavorite = favorites.has(talk.id);
          updateStarAppearance(starBtn, nowFavorite);
          if (favoritesOnly) {
            applyFilters();
          }
        });

        timeRow.appendChild(timePill);
        timeRow.appendChild(starBtn);
        card.appendChild(timeRow);

        // –ó–∞–≥–æ–ª–æ–≤–æ–∫
        const titleEl = document.createElement("h2");
        titleEl.className =
          "text-base font-semibold leading-snug text-slate-900 sm:text-lg";
        titleEl.textContent = talk.title;
        card.appendChild(titleEl);

        // –°–ø–∏–∫–µ—Ä (–µ—Å–ª–∏ –µ—Å—Ç—å)
        if (talk.speaker && talk.speaker.trim() !== "") {
          const speakerEl = document.createElement("p");
          speakerEl.className = "text-sm font-medium text-slate-800";
          speakerEl.textContent = talk.speaker;
          card.appendChild(speakerEl);
        }

        // –ù–∏–∑ –∫–∞—Ä—Ç–æ—á–∫–∏: —Ç—Ä–µ–∫
        const footer = document.createElement("div");
        footer.className = "mt-1 flex items-center justify-between gap-3";

        const track = talk.track || "–û–±—â–µ–µ";
        const trackClass =
          trackStyles[track] || "bg-slate-100 text-slate-800 ring-slate-200";

        const trackPill = document.createElement("span");
        trackPill.className =
          "inline-flex items-center rounded-full px-2.5 py-1 text-[11px] font-semibold uppercase tracking-wide ring-1 ring-inset " +
          trackClass;
        trackPill.textContent = track;

        footer.appendChild(trackPill);
        card.appendChild(footer);

        // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è
        requestAnimationFrame(() => {
          card.classList.add("card-fade--visible");
        });

        return card;
      }

      // –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ –¥–æ–∫–ª–∞–¥–æ–≤
      function renderTalks(list) {
        container.innerHTML = "";
        if (!list.length) {
          emptyState.classList.remove("hidden");
          return;
        }
        emptyState.classList.add("hidden");

        list.forEach((talk) => {
          const card = createTalkCard(talk);
          container.appendChild(card);
        });
      }

      // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–ø–æ–∏—Å–∫ + —Ç—Ä–µ–∫ + –∏–∑–±—Ä–∞–Ω–Ω–æ–µ)
      function applyFilters() {
        container.classList.add("is-filtering");

        const query = searchInput.value.trim().toLowerCase();
        const selectedTrack = trackSelect.value;

        const filtered = talks.filter((talk) => {
          const matchesTrack =
            selectedTrack === "all" || talk.track === selectedTrack;

          const haystack = (
            (talk.title || "") +
            " " +
            (talk.speaker || "")
          ).toLowerCase();

          const matchesQuery =
            query === "" || haystack.includes(query);

          const matchesFavorite =
            !favoritesOnly || favorites.has(talk.id);

          return matchesTrack && matchesQuery && matchesFavorite;
        });

        renderTalks(filtered);

        requestAnimationFrame(() => {
          container.classList.remove("is-filtering");
        });
      }

      // –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è —à–∞—Ä–∏–Ω–≥–∞
      function buildShareUrl() {
        const base = window.location.href.split("#")[0];
        const params = new URLSearchParams();
        if (favorites.size) {
          params.set("fav", [...favorites].join(","));
        }
        if (favoritesOnly) {
          params.set("favOnly", "1");
        }
        const query = params.toString();
        return query ? base + "#" + query : base;
      }

      // –°–ª—É—à–∞—Ç–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π
      searchInput.addEventListener("input", applyFilters);
      trackSelect.addEventListener("change", applyFilters);

      favoritesToggle.addEventListener("click", () => {
        favoritesOnly = !favoritesOnly;
        updateFavoritesToggleAppearance();
        applyFilters();
      });

      shareButton.addEventListener("click", async () => {
        const url = buildShareUrl();
        if (navigator.clipboard && navigator.clipboard.writeText) {
          try {
            await navigator.clipboard.writeText(url);
            const originalText = shareButton.textContent;
            shareButton.textContent = "–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!";
            setTimeout(() => {
              shareButton.textContent = originalText;
            }, 1500);
          } catch (e) {
            window.prompt("–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É:", url);
          }
        } else {
          window.prompt("–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É:", url);
        }
      });

      // –ü–µ—Ä–≤—ã–π —Ä–µ–Ω–¥–µ—Ä
      updateFavoritesToggleAppearance();
      applyFilters();
    });
  </script>
</body>
</html>
